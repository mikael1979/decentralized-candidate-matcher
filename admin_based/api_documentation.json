{
  "api_version": "1.0",
  "system_name": "Decentralized Candidate Matcher",
  "description": "Hajautettu vaalikonejärjestelmä IPFS-teknologialla",
  "base_url": "http://localhost:5000",
  "authentication": {
    "admin_required": "Salasana-based sessio, asennettuna install.py:llä",
    "public_endpoints": "Kaikki muut endpointit ovat julkisia"
  },
  "endpoints": {
    "public": {
      "get_meta": {
        "url": "/api/meta",
        "method": "GET",
        "description": "Hakee järjestelmän meta-tiedot",
        "parameters": "none",
        "response": {
          "system": "string",
          "version": "string",
          "election": {
            "id": "string",
            "name": {"fi": "string", "en": "string", "sv": "string"},
            "date": "string"
          },
          "content": {
            "last_updated": "datetime",
            "questions_count": "number",
            "candidates_count": "number",
            "parties_count": "number"
          }
        }
      },
      "get_questions": {
        "url": "/api/questions",
        "method": "GET",
        "description": "Hakee kaikki kysymykset",
        "parameters": "none",
        "response": [
          {
            "id": "string",
            "category": {"fi": "string", "en": "string", "sv": "string"},
            "question": {"fi": "string", "en": "string", "sv": "string"},
            "tags": ["string"],
            "scale": {"min": -5, "max": 5},
            "metadata": {
              "elo_rating": "number",
              "blocked": "boolean",
              "created_at": "datetime"
            },
            "elo": {
              "base_rating": "number",
              "deltas": [
                {
                  "timestamp": "datetime",
                  "delta": "number",
                  "by": "string"
                }
              ],
              "current_rating": "number"
            }
          }
        ]
      },
      "get_candidates": {
        "url": "/api/candidates",
        "method": "GET",
        "description": "Hakee kaikki ehdokkaat",
        "parameters": "none",
        "response": [
          {
            "id": "number",
            "name": "string",
            "party": "string",
            "district": "string",
            "answers": [
              {
                "question_id": "number",
                "answer": "number (-5 to 5)",
                "confidence": "number (0-1)",
                "justification": {
                  "fi": "string",
                  "en": "string", 
                  "sv": "string"
                }
              }
            ]
          }
        ]
      },
      "get_parties": {
        "url": "/api/parties",
        "method": "GET", 
        "description": "Hakee kaikki puolueet",
        "parameters": "none",
        "response": ["string"]
      },
      "submit_question": {
        "url": "/api/submit_question",
        "method": "POST",
        "description": "Lähettää uuden kysymyksen",
        "parameters": {
          "question": {
            "fi": "string (required)",
            "en": "string",
            "sv": "string"
          },
          "category": "string (required)",
          "tags": ["string"],
          "scale": {
            "min": -5,
            "max": 5
          }
        },
        "response": {
          "success": "boolean",
          "cid": "string (IPFS CID)",
          "message": "string"
        }
      },
      "compare_parties": {
        "url": "/api/compare_parties",
        "method": "POST",
        "description": "Vertaa käyttäjän vastauksia tiettyyn puolueeseen",
        "parameters": {
          "user_answers": {
            "question_id": "answer_value"
          },
          "party_name": "string"
        },
        "response": {
          "success": "boolean",
          "match_percentage": "number",
          "candidate_count": "number",
          "matched_questions": "number"
        }
      },
      "compare_all_parties": {
        "url": "/api/compare_all_parties", 
        "method": "POST",
        "description": "Vertaa käyttäjän vastauksia kaikkiin puolueisiin",
        "parameters": {
          "user_answers": {
            "question_id": "answer_value"
          }
        },
        "response": [
          {
            "party_name": "string",
            "match_percentage": "number",
            "candidate_count": "number"
          }
        ]
      }
    },
    "admin": {
      "login": {
        "url": "/api/admin/login",
        "method": "POST",
        "description": "Kirjautuu admin-käyttöliittymään",
        "parameters": {
          "password": "string (asennussalasana)"
        },
        "response": {
          "success": "boolean",
          "message": "string"
        }
      },
      "logout": {
        "url": "/api/admin/logout",
        "method": "POST",
        "description": "Kirjaudu ulos",
        "parameters": "none",
        "response": {
          "success": "boolean",
          "message": "string"
        }
      },
      "status": {
        "url": "/api/admin/status",
        "method": "GET",
        "description": "Tarkistaa kirjautumistilan",
        "parameters": "none", 
        "response": {
          "authenticated": "boolean",
          "login_time": "datetime"
        }
      },
      "get_questions_admin": {
        "url": "/api/admin/questions",
        "method": "GET",
        "description": "Hakee kaikki kysymykset (mukaan lukien blokatut)",
        "parameters": "none",
        "response": "sama kuin /api/questions, mutta sisältää blokatut"
      },
      "block_question": {
        "url": "/api/admin/block_question",
        "method": "POST",
        "description": "Estää kysymyksen",
        "parameters": {
          "question_id": "string|number",
          "reason": "string"
        },
        "response": {
          "success": "boolean",
          "message": "string"
        }
      },
      "unblock_question": {
        "url": "/api/admin/unblock_question",
        "method": "POST",
        "description": "Poistaa kysymyksen eston",
        "parameters": {
          "question_id": "string|number"
        },
        "response": {
          "success": "boolean", 
          "message": "string"
        }
      },
      "system_stats": {
        "url": "/api/admin/system_stats",
        "method": "GET",
        "description": "Hakee järjestelmän tilastot",
        "parameters": "none",
        "response": {
          "total_questions": "number",
          "total_candidates": "number", 
          "total_parties": "number",
          "total_answers": "number",
          "avg_answers_per_candidate": "number",
          "categories": {
            "category_name": "count"
          },
          "system_health": "string"
        }
      },
      "elo_ranking": {
        "url": "/api/admin/questions/elo_ranking",
        "method": "GET",
        "description": "Hakee kysymykset Elo-luokituksen mukaan",
        "parameters": "none",
        "response": "sama kuin /api/admin/questions, mutta järjestetty Elo:n mukaan"
      }
    }
  },
  "data_structures": {
    "question": {
      "id": "string|number",
      "category": "object (multi-language)",
      "question": "object (multi-language)", 
      "tags": "string[]",
      "scale": {"min": -5, "max": 5},
      "metadata": {
        "elo_rating": "number",
        "blocked": "boolean",
        "created_at": "datetime",
        "created_by": "string"
      },
      "elo": {
        "base_rating": "number",
        "deltas": "array of changes",
        "current_rating": "number"
      }
    },
    "candidate": {
      "id": "number",
      "name": "string",
      "party": "string",
      "district": "string",
      "answers": [
        {
          "question_id": "number",
          "answer": "number (-5 to 5)",
          "confidence": "number (0-1)",
          "justification": "object (multi-language)"
        }
      ]
    }
  },
  "error_responses": {
    "authentication_error": {
      "success": false,
      "error": "Admin-kirjautuminen vaaditaan",
      "login_required": true
    },
    "validation_error": {
      "success": false,
      "errors": ["array of error messages"]
    },
    "server_error": {
      "success": false, 
      "error": "Sisäinen virhe"
    }
  }
}
